<template><div><PageHeader title="相册详情" desc="上传照片"/><div class="card"><UploadMock v-model="img"/><button @click="upload">上传</button></div><ResponsiveTableCard :items="photos"><template #default="{item}"><img :src="item.url||'https://via.placeholder.com/120'" class="thumb"/><p>{{item.name}}</p></template></ResponsiveTableCard></div></template><script>import { albumDetailApi, uploadPhotoApi } from '../../api/modules/album';import PageHeader from '../../components/PageHeader.vue';import UploadMock from '../../components/UploadMock.vue';import ResponsiveTableCard from '../../components/ResponsiveTableCard.vue';export default{components:{PageHeader,UploadMock,ResponsiveTableCard},data(){return{photos:[],img:''}},methods:{async load(){this.photos=(await albumDetailApi({id:this.$route.params.id})).data},async upload(){const u=this.$store.state.auth.user;await uploadPhotoApi({albumId:this.$route.params.id,userId:u.id,url:this.img,name:'上传图片'});this.img='';this.load()}},mounted(){this.load()}}</script>