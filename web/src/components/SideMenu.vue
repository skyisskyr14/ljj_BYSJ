<template>
  <nav>
    <div class="menu-title">ğŸ¥š åŒå­¦å½•å¯¼èˆª</div>
    <router-link v-for="m in menus" :key="m.path" :to="m.path" class="m">
      <span class="badge-dot">{{ m.label.slice(0, 1) }}</span>
      <span>{{ m.label }}</span>
    </router-link>
  </nav>
</template>

<script>
const all = {
  student: [
    ['/student/dashboard', 'å·¥ä½œå°'],
    ['/student/join', 'åŠ å…¥ç­çº§'],
    ['/student/class', 'æˆ‘çš„ç­çº§'],
    ['/student/posts', 'åŠ¨æ€å¹¿åœº'],
    ['/student/albums', 'ç­çº§ç›¸å†Œ'],
    ['/student/map', 'åŒå­¦åœ°å›¾'],
    ['/student/members', 'æˆå‘˜åå½•'],
    ['/student/profile', 'ä¸ªäººä¸­å¿ƒ']
  ],
  monitor: [
    ['/monitor/class-manage', 'ç­çº§ç®¡ç†'],
    ['/monitor/member-role', 'èŒä½ç®¡ç†'],
    ['/monitor/album-manage', 'ç›¸å†Œç®¡ç†']
  ],
  admin: [
    ['/admin/dashboard', 'å¹³å°çœ‹æ¿'],
    ['/admin/users', 'ç”¨æˆ·ç®¡ç†'],
    ['/admin/classes', 'ç­çº§ç®¡ç†'],
    ['/admin/review-posts', 'åŠ¨æ€å®¡æ ¸'],
    ['/admin/review-images', 'å›¾ç‰‡å®¡æ ¸'],
    ['/admin/settings', 'ç³»ç»Ÿè®¾ç½®']
  ]
}

export default {
  computed: {
    menus() {
      const role = this.$store.state.auth.user && this.$store.state.auth.user.role
      let arr = []
      if (role === 'student') arr = all.student
      if (role === 'monitor') arr = [...all.student, ...all.monitor]
      if (role === 'admin') arr = all.admin
      return arr.map(i => ({ path: i[0], label: i[1] }))
    }
  }
}
</script>
