{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport \"core-js/modules/es.json.parse.js\";\nimport Vue from 'vue';\nimport Router from 'vue-router';\nimport routes from './routes';\nVue.use(Router);\nconst router = new Router({\n  mode: 'hash',\n  routes\n});\nrouter.beforeEach((to, from, next) => {\n  const user = JSON.parse(localStorage.getItem('user') || 'null');\n  const token = localStorage.getItem('token');\n  if (to.matched.some(i => i.meta.requiresAuth) && !token) return next('/login');\n  const roleMeta = to.meta.roles;\n  if (roleMeta && (!user || !roleMeta.includes(user.role))) return next('/403');\n  next();\n});\nexport default router;","map":{"version":3,"names":["Vue","Router","routes","use","router","mode","beforeEach","to","from","next","user","JSON","parse","localStorage","getItem","token","matched","some","i","meta","requiresAuth","roleMeta","roles","includes","role"],"sources":["/home/skyissky/skyissky/BYSJ/ljj/web/src/router/index.js"],"sourcesContent":["import Vue from 'vue'\nimport Router from 'vue-router'\nimport routes from './routes'\nVue.use(Router)\nconst router=new Router({mode:'hash',routes})\nrouter.beforeEach((to,from,next)=>{\n const user=JSON.parse(localStorage.getItem('user')||'null')\n const token=localStorage.getItem('token')\n if(to.matched.some(i=>i.meta.requiresAuth)&&!token) return next('/login')\n const roleMeta=to.meta.roles\n if(roleMeta&&(!user||!roleMeta.includes(user.role))) return next('/403')\n next()\n})\nexport default router\n"],"mappings":";;;AAAA,OAAOA,GAAG,MAAM,KAAK;AACrB,OAAOC,MAAM,MAAM,YAAY;AAC/B,OAAOC,MAAM,MAAM,UAAU;AAC7BF,GAAG,CAACG,GAAG,CAACF,MAAM,CAAC;AACf,MAAMG,MAAM,GAAC,IAAIH,MAAM,CAAC;EAACI,IAAI,EAAC,MAAM;EAACH;AAAM,CAAC,CAAC;AAC7CE,MAAM,CAACE,UAAU,CAAC,CAACC,EAAE,EAACC,IAAI,EAACC,IAAI,KAAG;EACjC,MAAMC,IAAI,GAACC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,IAAE,MAAM,CAAC;EAC3D,MAAMC,KAAK,GAACF,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EACzC,IAAGP,EAAE,CAACS,OAAO,CAACC,IAAI,CAACC,CAAC,IAAEA,CAAC,CAACC,IAAI,CAACC,YAAY,CAAC,IAAE,CAACL,KAAK,EAAE,OAAON,IAAI,CAAC,QAAQ,CAAC;EACzE,MAAMY,QAAQ,GAACd,EAAE,CAACY,IAAI,CAACG,KAAK;EAC5B,IAAGD,QAAQ,KAAG,CAACX,IAAI,IAAE,CAACW,QAAQ,CAACE,QAAQ,CAACb,IAAI,CAACc,IAAI,CAAC,CAAC,EAAE,OAAOf,IAAI,CAAC,MAAM,CAAC;EACxEA,IAAI,CAAC,CAAC;AACP,CAAC,CAAC;AACF,eAAeL,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}