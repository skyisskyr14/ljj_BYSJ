{"ast":null,"code":"import PageHeader from '../../components/PageHeader.vue';\nimport { postListApi, createPostApi, likePostApi, commentPostApi } from '../../api/modules/post';\nexport default {\n  components: {\n    PageHeader\n  },\n  data() {\n    return {\n      posts: [],\n      content: '',\n      comment: {}\n    };\n  },\n  methods: {\n    async load() {\n      this.posts = (await postListApi()).data;\n    },\n    async pub() {\n      const u = this.$store.state.auth.user;\n      await createPostApi({\n        classId: 'c1',\n        userId: u.id,\n        content: this.content,\n        images: []\n      });\n      this.content = '';\n      this.load();\n    },\n    async like(p) {\n      const u = this.$store.state.auth.user;\n      await likePostApi({\n        id: p.id,\n        userId: u.id\n      });\n      this.load();\n    },\n    async sendComment(p) {\n      const u = this.$store.state.auth.user;\n      await commentPostApi({\n        id: p.id,\n        comment: {\n          userId: u.id,\n          text: this.comment[p.id],\n          replyTo: null\n        }\n      });\n      this.comment[p.id] = '';\n      this.load();\n    }\n  },\n  mounted() {\n    this.load();\n  }\n};","map":{"version":3,"names":["PageHeader","postListApi","createPostApi","likePostApi","commentPostApi","components","data","posts","content","comment","methods","load","pub","u","$store","state","auth","user","classId","userId","id","images","like","p","sendComment","text","replyTo","mounted"],"sources":["src/views/student/Posts.vue"],"sourcesContent":["<template><div><PageHeader title=\"Âä®ÊÄÅÂπøÂú∫\" desc=\"ÂèëÂ∏É„ÄÅÁÇπËµû„ÄÅËØÑËÆ∫\"/><div class=\"card\"><textarea v-model=\"content\" placeholder=\"ËØ¥ÁÇπ‰ªÄ‰πà\"/><button @click=\"pub\">ÂèëÂ∏É</button></div><div class=\"card\" v-for=\"p in posts\" :key=\"p.id\"><p>{{p.content}}</p><small>{{p.status}}</small><div><button @click=\"like(p)\">üëç {{p.likes.length}}</button><input v-model=\"comment[p.id]\" placeholder=\"ËØÑËÆ∫\"/><button @click=\"sendComment(p)\">ÂèëÈÄÅ</button></div><ul><li v-for=\"c in p.comments\" :key=\"c.id\">{{c.text}}</li></ul></div></div></template><script>import PageHeader from '../../components/PageHeader.vue';import { postListApi,createPostApi,likePostApi,commentPostApi } from '../../api/modules/post';export default{components:{PageHeader},data(){return{posts:[],content:'',comment:{}}},methods:{async load(){this.posts=(await postListApi()).data},async pub(){const u=this.$store.state.auth.user;await createPostApi({classId:'c1',userId:u.id,content:this.content,images:[]});this.content='';this.load()},async like(p){const u=this.$store.state.auth.user;await likePostApi({id:p.id,userId:u.id});this.load()},async sendComment(p){const u=this.$store.state.auth.user;await commentPostApi({id:p.id,comment:{userId:u.id,text:this.comment[p.id],replyTo:null}});this.comment[p.id]='';this.load()}},mounted(){this.load()}}</script>"],"mappings":"AAAA,OAAAA,UAAA;AAAA,SAAAC,WAAA,EAAAC,aAAA,EAAAC,WAAA,EAAAC,cAAA;AAAA;EAAAC,UAAA;IAAAL;EAAA;EAAAM,KAAA;IAAA;MAAAC,KAAA;MAAAC,OAAA;MAAAC,OAAA;IAAA;EAAA;EAAAC,OAAA;IAAA,MAAAC,KAAA;MAAA,KAAAJ,KAAA,UAAAN,WAAA,IAAAK,IAAA;IAAA;IAAA,MAAAM,IAAA;MAAA,MAAAC,CAAA,QAAAC,MAAA,CAAAC,KAAA,CAAAC,IAAA,CAAAC,IAAA;MAAA,MAAAf,aAAA;QAAAgB,OAAA;QAAAC,MAAA,EAAAN,CAAA,CAAAO,EAAA;QAAAZ,OAAA,OAAAA,OAAA;QAAAa,MAAA;MAAA;MAAA,KAAAb,OAAA;MAAA,KAAAG,IAAA;IAAA;IAAA,MAAAW,KAAAC,CAAA;MAAA,MAAAV,CAAA,QAAAC,MAAA,CAAAC,KAAA,CAAAC,IAAA,CAAAC,IAAA;MAAA,MAAAd,WAAA;QAAAiB,EAAA,EAAAG,CAAA,CAAAH,EAAA;QAAAD,MAAA,EAAAN,CAAA,CAAAO;MAAA;MAAA,KAAAT,IAAA;IAAA;IAAA,MAAAa,YAAAD,CAAA;MAAA,MAAAV,CAAA,QAAAC,MAAA,CAAAC,KAAA,CAAAC,IAAA,CAAAC,IAAA;MAAA,MAAAb,cAAA;QAAAgB,EAAA,EAAAG,CAAA,CAAAH,EAAA;QAAAX,OAAA;UAAAU,MAAA,EAAAN,CAAA,CAAAO,EAAA;UAAAK,IAAA,OAAAhB,OAAA,CAAAc,CAAA,CAAAH,EAAA;UAAAM,OAAA;QAAA;MAAA;MAAA,KAAAjB,OAAA,CAAAc,CAAA,CAAAH,EAAA;MAAA,KAAAT,IAAA;IAAA;EAAA;EAAAgB,QAAA;IAAA,KAAAhB,IAAA;EAAA;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}