{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { captchaApi } from '../../api/modules/auth';\nexport default {\n  data() {\n    return {\n      captcha: {\n        uuid: '',\n        data: ''\n      },\n      form: {\n        username: '',\n        password: '',\n        securePassword: '123456',\n        nickname: '',\n        role: 2,\n        type: 2,\n        captchaType: 'image',\n        captchaUuid: '',\n        captchaInput: ''\n      }\n    };\n  },\n  created() {\n    this.loadCaptcha();\n  },\n  methods: {\n    async loadCaptcha() {\n      const r = await captchaApi('image');\n      if (r.code === 200) {\n        this.captcha = r.data;\n        this.form.captchaUuid = r.data.uuid;\n      }\n    },\n    async submit() {\n      const r = await this.$store.dispatch('auth/register', this.form);\n      if (r.code === 200) {\n        this.$router.push('/student/dashboard');\n      } else {\n        this.$message.error(r.message);\n        this.loadCaptcha();\n      }\n    }\n  }\n};","map":{"version":3,"names":["captchaApi","data","captcha","uuid","form","username","password","securePassword","nickname","role","type","captchaType","captchaUuid","captchaInput","created","loadCaptcha","methods","r","code","submit","$store","dispatch","$router","push","$message","error","message"],"sources":["src/views/auth/Register.vue"],"sourcesContent":["<template>\n  <div class=\"auth-wrap\">\n    <div class=\"auth-card auth-card-register\">\n      <div class=\"auth-title\">注册同学录账号</div>\n      <p class=\"auth-subtitle\">仅支持学生、班长/班主任注册</p>\n\n      <div class=\"form-grid\">\n        <select v-model=\"form.role\">\n          <option :value=\"2\">学生</option>\n          <option :value=\"4\">班长/班主任</option>\n        </select>\n        <input v-model=\"form.username\" placeholder=\"账号（学号/工号）\" />\n        <input v-model=\"form.nickname\" placeholder=\"昵称\" />\n        <input v-model=\"form.password\" type=\"password\" placeholder=\"密码\" />\n\n        <div class=\"captcha-row\">\n          <input v-model=\"form.captchaInput\" placeholder=\"请输入验证码\" />\n          <img v-if=\"captcha.data\" :src=\"`data:image/png;base64,${captcha.data}`\" class=\"captcha-img\" @click=\"loadCaptcha\" />\n          <button class=\"chip\" @click=\"loadCaptcha\">换一张</button>\n        </div>\n      </div>\n\n      <div class=\"auth-actions\">\n        <button @click=\"submit\">注册并登录</button>\n        <router-link to=\"/login\" class=\"chip\">已有账号？去登录</router-link>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { captchaApi } from '../../api/modules/auth'\n\nexport default {\n  data() {\n    return {\n      captcha: { uuid: '', data: '' },\n      form: {\n        username: '',\n        password: '',\n        securePassword: '123456',\n        nickname: '',\n        role: 2,\n        type: 2,\n        captchaType: 'image',\n        captchaUuid: '',\n        captchaInput: ''\n      }\n    }\n  },\n  created() {\n    this.loadCaptcha()\n  },\n  methods: {\n    async loadCaptcha() {\n      const r = await captchaApi('image')\n      if (r.code === 200) {\n        this.captcha = r.data\n        this.form.captchaUuid = r.data.uuid\n      }\n    },\n    async submit() {\n      const r = await this.$store.dispatch('auth/register', this.form)\n      if (r.code === 200) {\n        this.$router.push('/student/dashboard')\n      } else {\n        this.$message.error(r.message)\n        this.loadCaptcha()\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.auth-card-register { max-width: 680px; }\n.form-grid { display: grid; gap: 10px; margin: 14px 0; }\n.captcha-row { display: grid; grid-template-columns: 1fr 110px auto; gap: 8px; align-items: center; }\n.captcha-img { width: 110px; height: 42px; object-fit: cover; border-radius: 8px; border: 1px solid #f0d8a6; cursor: pointer; }\n</style>\n"],"mappings":";AA+BA,SAAAA,UAAA;AAEA;EACAC,KAAA;IACA;MACAC,OAAA;QAAAC,IAAA;QAAAF,IAAA;MAAA;MACAG,IAAA;QACAC,QAAA;QACAC,QAAA;QACAC,cAAA;QACAC,QAAA;QACAC,IAAA;QACAC,IAAA;QACAC,WAAA;QACAC,WAAA;QACAC,YAAA;MACA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,WAAA;EACA;EACAC,OAAA;IACA,MAAAD,YAAA;MACA,MAAAE,CAAA,SAAAjB,UAAA;MACA,IAAAiB,CAAA,CAAAC,IAAA;QACA,KAAAhB,OAAA,GAAAe,CAAA,CAAAhB,IAAA;QACA,KAAAG,IAAA,CAAAQ,WAAA,GAAAK,CAAA,CAAAhB,IAAA,CAAAE,IAAA;MACA;IACA;IACA,MAAAgB,OAAA;MACA,MAAAF,CAAA,cAAAG,MAAA,CAAAC,QAAA,uBAAAjB,IAAA;MACA,IAAAa,CAAA,CAAAC,IAAA;QACA,KAAAI,OAAA,CAAAC,IAAA;MACA;QACA,KAAAC,QAAA,CAAAC,KAAA,CAAAR,CAAA,CAAAS,OAAA;QACA,KAAAX,WAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}